Будем решать задачу при помощи такого алгоритма:

    Зафиксируем красную точку.
        Найдем количество треугольников с вершинами в красных точках, которые не содержат в себе синих точек и у которых одна из вершин это зафиксированная в пункте 1 точка.
            Удалим зафиксированную точку из набора и повторим пункт 1, если еще остались красные точки.

            Первый и третий пункты пояснения не требуют, поэтому основной частью является пункт 2.

            Пусть зафиксирована красная точка А (в первом пункте). Отсортируем все остальные еще не удаленные точки (и красные и синие вместе) по полярному углу относительно А. Затем будем перебирать красную точку B, которая будет второй вершиной треугольника. Теперь нам нужно найти количество треугольников с вершинами в красных точках, причем у которых 2 вершины фиксированы и которые не содержат в себе ни одной синей точки.

            Для решения этой задачи, будем перебирать все еще не удаленные точки С в порядке возрастания угла ABC начиная от точки, которая следует за точкой B. Для того чтобы каждый треугольник просмотреть ровно 1 раз, будем останавливаться как только угол между векторами AB и AC станет больше 180 градусов, либо когда мы придем к точке которую уже рассматривали. Будем выполнять такие действия:

                Если C - красная, тогда проверим, есть ли синие точки внутри треугольника ABC и если нет, увеличим ответ на 1. Заметим, что для этой проверки нам не нужно перебирать все синие точки, а достаточно хранить такую синюю точку D из уже просмотренных, для которой угол ABD - наименьший. Если она не принадлежит треугольнику ABC, то никакая синяя точка не может ему принадлежать.
                    Если C - синяя, то сравним ее с уже имеющейся D (либо если D еще не найдена, то просто присвоим D=C) и в случае, если угол ABC меньше чем угол ABD, то заменим D на C.

                    Заметим, что при выборе новой точки B мы считаем что точка D еще не найдена и до тех пор пока не встретится синяя точка считаем что все красные точки образуют с А и B треугольник, не содержащий синих точек.

                    Сложность алгоритма выходит O(N2(N+M)). 
